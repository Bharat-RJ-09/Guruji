<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account Settings | NextEdu</title>
    <link rel="stylesheet" href="assets/css/dashboard.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .profile-container { display: grid; grid-template-columns: 1.2fr 0.8fr; gap: 30px; }
        .profile-card {
            background: var(--card-glass); border: 1px solid var(--border-glass);
            padding: 35px; border-radius: 24px; box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .section-header { margin-bottom: 25px; display: flex; align-items: center; gap: 10px; border-bottom: 1px solid var(--border-glass); padding-bottom: 15px; }
        .section-header h3 { margin: 0; font-size: 1.2rem; font-weight: 600; color: #fff; }
        .section-header i { color: var(--neon-blue); }

        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .form-group { margin-bottom: 5px; }
        .form-group label { display: block; color: var(--text-grey); margin-bottom: 8px; font-size: 0.85rem; font-weight: 500; text-transform: uppercase; letter-spacing: 0.5px; }
        .form-inp {
            width: 100%; padding: 14px; background: rgba(0,0,0,0.3);
            border: 1px solid var(--border-glass); color: #fff; border-radius: 10px; outline: none;
            font-family: 'Poppins', sans-serif; transition: 0.3s;
        }
        .form-inp:focus { border-color: var(--neon-blue); background: rgba(0,0,0,0.5); }
        .form-inp:disabled { opacity: 0.6; cursor: not-allowed; background: rgba(255,255,255,0.02); }

        .btn-save {
            background: var(--neon-blue); color: #000; padding: 14px; border: none;
            border-radius: 10px; font-weight: 600; cursor: pointer; width: 100%; margin-top: 20px;
            transition: 0.3s;
        }
        .btn-save:hover { box-shadow: 0 0 15px rgba(0, 255, 225, 0.4); }

        /* Subscription Card - Premium Look */
        .sub-card { text-align: center; position: relative; overflow: hidden; display: flex; flex-direction: column; }
        .plan-badge {
            background: rgba(255, 255, 255, 0.1); color: #fff; padding: 6px 16px; 
            border-radius: 20px; font-size: 0.8rem; font-weight: 600; display: inline-block; margin-bottom: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2); align-self: center;
        }
        .pro-features { text-align: left; background: rgba(255,255,255,0.03); padding: 25px; border-radius: 15px; margin: 25px 0; }
        .pro-features li { 
            margin-bottom: 12px; color: #ddd; list-style: none; display: flex; align-items: center; gap: 10px; font-size: 0.95rem; 
        }
        .pro-features i { color: #00ff88; font-size: 0.9rem; }
        
        /* Dynamic Classes for Features */
        .locked i { color: #ff4444 !important; }
        .locked { color: #777 !important; }

        @media (max-width: 900px) { .profile-container { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

    <aside class="sidebar" id="sidebar">
        <div class="brand">
            <i class="fa-solid fa-graduation-cap"></i> Next<span>Edu</span>
        </div>

        <a href="dashboard.html" class="nav-item"><i class="fa-solid fa-chart-pie"></i> Dashboard</a>
        <a href="leaderboard.html" class="nav-item"><i class="fa-solid fa-trophy"></i> Leaderboard</a>
        <a href="history.html" class="nav-item"><i class="fa-solid fa-clock-rotate-left"></i> History</a>
        <a href="wallet.html" class="nav-item"><i class="fa-solid fa-wallet"></i> Wallet</a>
        <a href="subscription.html" class="nav-item" style="color: yellow;"><i class="fa-solid fa-crown"></i> Upgrade</a>
        <a href="profile.html" class="nav-item active"><i class="fa-solid fa-user-gear"></i> Profile</a>

        <div style="margin-top: auto;">
            <a href="#" onclick="logout()" class="nav-item" style="color: #ff4444;">
                <i class="fa-solid fa-arrow-right-from-bracket"></i> Logout
            </a>
            <br> <br>
        </div>
    </aside>

    <div class="sidebar-overlay" onclick="toggleSidebar()"></div>

    <main class="main-content">
        <header class="header">
            <button class="menu-btn" onclick="toggleSidebar()"><i class="fa-solid fa-bars"></i></button>
            <div class="welcome">
                <h1>Account Settings</h1>
                <p>Manage your identity and subscription.</p>
            </div>
            <div class="user-profile">
                <div class="avatar"><i class="fa-solid fa-user"></i></div>
                <span id="userDisplay">Loading...</span>
            </div>
        </header>

        <div class="profile-container">
            
            <div class="profile-card">
                <div class="section-header">
                    <i class="fa-solid fa-id-card"></i>
                    <h3>Identity & Access</h3>
                </div>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label>User Handle</label>
                        <input type="text" id="p_username" class="form-inp" disabled>
                    </div>
                    <div class="form-group">
                        <label>Display Name</label>
                        <input type="text" id="p_fullname" class="form-inp">
                    </div>
                </div>

                <div class="form-group" style="margin-top: 20px;">
                    <label>Registered Email</label>
                    <input type="text" id="p_email" class="form-inp" disabled> 
                </div>
                
                <div class="form-group" style="margin-top: 20px;">
                    <label>Member Since</label>
                    <input type="text" id="p_joined" class="form-inp" disabled> 
                </div>

                <button class="btn-save" onclick="updateProfile()">Update Profile Details</button>

                <div class="section-header" style="margin-top: 40px; border-top: 1px solid var(--border-glass); padding-top: 30px; border-bottom: none;">
                    <i class="fa-solid fa-shield-halved" style="color: var(--neon-purple);"></i>
                    <h3>Security Credentials</h3>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label>Current Password</label>
                        <input type="password" id="curr_pass" class="form-inp" placeholder="••••••••">
                    </div>
                    <div class="form-group">
                        <label>New Secure Password</label>
                        <input type="password" id="new_pass" class="form-inp" placeholder="Min 6 characters">
                    </div>
                </div>
                <button class="btn-save" style="background:var(--neon-purple); color:#fff;" onclick="changePassword()">Update Security Credentials</button>
            </div>

            <div class="profile-card sub-card">
                <span class="plan-badge" id="plan_badge">LOADING...</span>
                <h2 id="plan_name" style="color:#fff; margin:10px 0; font-size: 2rem;">...</h2>
                <p id="plan_limit" style="color:var(--text-grey); font-size: 0.9rem;">...</p>

                <ul class="pro-features">
                    <li id="feat_quiz"><i class="fa-solid fa-circle-check"></i> <span>Daily Quizzes</span></li>
                    <li id="feat_ai" class="locked"><i class="fa-solid fa-lock"></i> <span>AI Tutor Access</span></li>
                    <li id="feat_support"><i class="fa-solid fa-circle-check"></i> <span>Community Support</span></li>
                </ul>

                <button id="btn_upgrade" class="btn-save" style="background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%); color: #000; box-shadow: 0 5px 20px rgba(255, 215, 0, 0.2);" onclick="window.location.href='subscription.html'">
                    <i class="fa-solid fa-crown"></i> Unlock More Features
                </button>
                <p style="margin-top:15px; font-size:0.8rem; color:#666;">Secure payment via Wallet</p>
            </div>

        </div>
    </main>

    <script src="assets/js/dashboard.js"></script> 
    <script src="assets/js/profile.js"></script>
    <script>
        function toggleSidebar() { document.getElementById("sidebar").classList.toggle("active"); }
    </script>
</body>
</html>